<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
       <title></title>
       <h:outputStylesheet library="css" name="styles.css"/>
       <link rel="stylesheet" href="resources/css/styles.css" />
    </h:head>
	<h:body>
	    <div id="nav">
	        <div id="navContent">
	            <h1>TimeLink</h1>
	            <ul id="navList">
	                <li><a href="home.xhtml">Home</a></li>
	                <li><a href="timesheet.xhtml">Timesheet</a></li>
	                <li><a href="report.xhtml">Report</a></li>
	            </ul>
	        </div>
	    </div>
	    <div id="content">
	        <div id="timesheetHeader">
	            <div id="left" class="headerPart">
	                <p>Name:</p><p><h:outputText value="#{Session.currentEmployee.firstName} #{Session.currentEmployee.lastName}" /></p>
	                <br />
	                <p>Title:</p><p>PLACEHOLDER: UI Specialist</p>
	                <br />
	                <p>Date:</p><p><h:outputText value="#{TimesheetController.timesheet.date}" /></p>
	            </div>
	            <div id="right" class="headerPart">
	                <p>UserID:</p><p><h:outputText value="#{Session.currentEmployee.employeeId}" /></p>
	                <br />
	                <p>Department:</p><p>PLACEHOLDER: BCIT_IS</p>
	                <br />
	                <p>Week:</p><p>PLACEHOLDER: 5</p>
	            </div>
	        </div>
	        
	        <h:form>
	        <p:remoteCommand name="onCellEdit" update="table" />
	        <p:dataTable id="table" var="row" value="#{TimesheetController.timesheet.rows}" editable="true" editMode="cell" rowIndexVar="index"
	        render="#{TimesheetController.timesheet != null}">
	        	<p:column headerText="project">
					<p:cellEditor>
					    <f:facet name="output">
					        <h:outputText value="#{ProjectManager.find(row.projectId) != null ? ProjectManager.find(row.projectId).projectName : '-'}" id="projID" />
					    </f:facet>
					    <f:facet name="input">
	                        <p:selectOneMenu value="#{row.projectId}" style="width:100%">
	                            <p:ajax event="itemSelect" oncomplete="onCellEdit()" />
	                            <f:selectItem itemLabel="" itemValue="#{0}"/>
                                <f:selectItems value="#{ProjectManager.findByEmpId(Session.getCurrentEmployee().employeeId) != null ? ProjectManager.findByEmpId(Session.getCurrentEmployee().employeeId) : null}" var="pro" itemLabel="#{pro.projectName}" itemValue="#{pro.projectNumber}" />
                            </p:selectOneMenu>
	                    </f:facet>
					</p:cellEditor>
				</p:column>
				
				<p:column headerText="work package">
					<p:cellEditor>
					    <f:facet name="output">
					        <h:outputText value="#{WorkPackageManager.find(row.workPackageId) != null ? WorkPackageManager.find(row.workPackageId).code: '-'}" id="wpID" />
					    </f:facet>
					    <f:facet name="input">
	                        <p:selectOneMenu value="#{row.workPackageId}" style="width:100%">
	                            <p:ajax event="itemSelect" oncomplete="onCellEdit()" />
	                            <f:selectItem itemLabel="" itemValue="#{0}"/>
                                <f:selectItems value="#{ProjectManager.find(row.projectId) != null ? ProjectManager.find(row.projectId).workPackages : null}" var="wp" itemLabel="#{wp.code}" itemValue="#{wp.workPackageId}" />
                            </p:selectOneMenu>
	                    </f:facet>
					</p:cellEditor>
				</p:column>
				
				<p:column headerText="sat">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(0).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(0).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                    
                    </p:column>
                <p:column headerText="sun">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(1).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(1).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="sun">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(1).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(1).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="mon">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(2).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(2).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="tues">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(3).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(3).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="wed">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(4).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(4).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="thurs">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(5).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(5).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="fri">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.hours.get(6).hour}" />
                        </f:facet>
                        <f:facet name="input">
                            
                            <h:inputText value="#{row.hours.get(6).hour}">
                                <f:validateDoubleRange minimum="0.0" maximum="24.0" />

                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                
                <p:column headerText="notes">
                    <p:cellEditor>
                        
                        <f:facet name="output">
                            <h:outputText value="#{row.note}" />
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{row.note}">
                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
	        </p:dataTable>
	        	<p:commandButton action="#{TimesheetController.save()}" value="save" ajax="false" >
	        	</p:commandButton>
	        	<p:commandButton action="#{TimesheetController.addRow()}" value="add row" ajax="false" >
	        	</p:commandButton>
	        	<p:commandButton action="#{TimesheetController.addTimesheet()}" value="add timesheet" ajax="false" >
	        	</p:commandButton>
	        </h:form>
	        <h:outputText value="STATUS: #{TimesheetController.timesheet.status}" />
	        <!--  
	        <div id="timesheet">
	            <h:messages errorClass="errors" layout="table"/>
                <h:form>
                    <h:dataTable value="#{timesheetRowListForm.list}" var="details" cellspacing="8" border="1">
                        <h:column>
                            <f:facet name="header">#{msgs.timesheetProjectHeader}</f:facet>
                            <h:inputText value="#{details.projectID}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" >
                            </h:inputText>
                            <h:outputText value="#{details.projectID}" rendered="#{not userList.currentEmployee.isAdmin
                                                                            and not timesheetList.timesheetEditable}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">#{msgs.timesheetPackageHeader}</f:facet>
                            <h:inputText value="#{details.workPackage}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" />
                            <h:outputText value="#{details.workPackage}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}" />
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetTotalHeader}</f:facet>
                           <h:outputText value="#{details.sum}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.totalHours}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetSatHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[0]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[0]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}" />
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[0]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetSunHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[1]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                               <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[1]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[1]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetMonHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[2]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[2]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[2]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetTueHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[3]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[3]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[3]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetWedHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[4]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[4]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[4]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetThuHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[5]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[5]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              #{timesheetList.currentTimesheet.dailyHours[5]}
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetFriHeader}</f:facet>
                           <h:inputText value="#{details.hoursForWeek[6]}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" 
                                                                           validator="#{inputValidator.validateTimesheetHours}">
                              <f:convertNumber maxFractionDigits="1" />
                           </h:inputText>
                           <h:outputText value="#{details.hoursForWeek[6]}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                           <f:facet name="footer">
                              <h:outputText value="#{timesheetList.currentTimesheet.dailyHours[6]}"/> 
                           </f:facet>
                        </h:column>
                        <h:column>
                           <f:facet name="header">#{msgs.timesheetNoteHeader}</f:facet>
                           <h:inputText value="#{details.notes}" rendered="#{userList.currentEmployee.isAdmin 
                                                                           or timesheetList.timesheetEditable}" />
                           <h:outputText value="#{details.notes}" rendered="#{not userList.currentEmployee.isAdmin}
                                                                            and not timesheetList.timesheetEditable}"/>
                        </h:column>
                     </h:dataTable>
                     <h:commandButton value="#{msgs.saveButton}" action="#{timesheetRowListForm.save}"/>
                     <h:commandButton value="#{msgs.newRowButton}" action="#{timesheetRowListForm.addRow}"/>
                </h:form> 
	        </div> -->
	    </div>
	</h:body>
</html>